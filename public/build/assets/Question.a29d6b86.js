import{L as z,i as W}from"./vue-countdown.esm.1e8aafbf.js";import{p as Y,e as q,t as N}from"./index.es.71ac79e5.js";import{a as H}from"./index.11ad6d56.js";import{H as F,L as G,z as k,r as B,o as a,c as o,a as C,w as E,b as e,n as S,t as m,e as r,F as f,d as L,g as y,h as j}from"./app.d5bcc56b.js";import{S as h}from"./sweetalert2.all.a4eedfbe.js";import{_ as X}from"./_plugin-vue_export-helper.cdc0426e.js";const Z={layout:z,components:{Head:F,Link:G,VueCountdown:W,MathJax:Y},props:{id:String,page:Number,exam:Object,duration:Object,questionLists:Object,section:Number,lastSection:Number,grade:Object,indexPage:Object},mounted(){let d=document.createElement("script");d.setAttribute("src","https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"),document.head.appendChild(d);function s(){const n=document.getElementById("elementId");N(n)}q({},s)},setup(d){var s,n=localStorage.getItem("indexPage");n!==null?s=k(n):s=k(d.indexPage);let t=["A","B","C","D","E"];d.exam.id!=localStorage.getItem("examId")&&(localStorage.setItem("examId",d.exam.id),localStorage.setItem("myAnswers",[]));const M=localStorage.getItem("myAnswers");let b=M?JSON.parse(M):[];localStorage.setItem("myAnswers",JSON.stringify(b)),localStorage.setItem("examId",d.exam.id);const v=k(0),x=k(d.duration),w=()=>{x.value=x.value-1e3,v.value=v.value+1},i=()=>{let u=document.createElement("script");u.setAttribute("src","https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"),document.head.appendChild(u);function c(){const _=document.getElementById("elementId");N(_)}q({},c)},l=()=>{i(),s.value=parseInt(s.value)-1},g=()=>{i(),s.value=parseInt(s.value)+1},J=u=>{i(),s.value=u},I=()=>{if(d.grade.is_blocked!=1){let u=parseInt(d.grade.total_tolerance)>0?parseInt(d.grade.total_tolerance)-1:0,c=u==0?"Tolerasi habis, ":"Toleransi Tersisa "+u+" kali lagi, ";h.fire({title:"UJIAN AKAN DI DIBLOKIR JIKA ANDA MENINGGAL SESI UJIAN",text:c+" jika toleransi habis anda tidak dapat melanjutkan ujian dan harus menghubungi admin",icon:"warning",showCancelButton:!1,confirmButtonColor:"#d33",cancelButtonColor:"#d33",confirmButtonText:"Mengerti",allowOutsideClick:!1}).then(_=>{_.isConfirmed&&j.Inertia.post(`/user/exam-groups/${d.exam.id}/decrement-tolerance`,{grade_id:d.grade.id},{onSuccess:()=>{location.reload()}})})}},D=u=>{const c=b.find(_=>_.question_id===u);return c?c.answer:0};let O=0;const R=(u,c)=>{const _={question_id:u,answer:c},P=b.findIndex(T=>T.question_id===_.question_id);P!==-1?b[P].answer=_.answer:b.push(_);try{O%20===0&&A(),localStorage.setItem("indexPage",s.value),localStorage.setItem("myAnswers",JSON.stringify(b)),O++,s.value<Object.keys(d.questionLists).length-1&&g()}catch(T){h.fire({title:"Error",text:"Submit Jawaban Error, silakan lakukan refresh dan pastikan perangkat terhubungan dengan jaringan."+T,icon:"error",showCancelButton:!1,confirmButtonText:"Refresh",allowOutsideClick:!1}).then(V=>{V.isConfirmed&&location.reload()})}},K=k(!1),U=k(!1),A=()=>{H.get("/check-connection").then(u=>{console.log("ada")}).catch(u=>{h.fire({title:"Error",text:`Submit Jawaban Error, silakan lakukan refresh dan pastikan perangkat terhubungan dengan jaringan.
`+u,icon:"error",showCancelButton:!1,confirmButtonText:"Refresh",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()})})},Q=(u="")=>{A(),d.section==d.lastSection||u=="block"?j.Inertia.post(`/user/exam-groups/${d.exam.id}/exam-end`,{exam_id:d.exam.id,grade_id:d.grade.id,myAnswers:b},{onSuccess:()=>{u=="block"?h.fire({title:"UJIAN DIBLOKIR KARENA SUDAH MELEWATI BATAS TOLERANSI.",text:"Anda tidak dapat melanjutkan ujian, silakan hubungi admin",icon:"warning",showCancelButton:!1,confirmButtonColor:"#d33",confirmButtonText:"Mengerti",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()}):(localStorage.removeItem("indexPage"),h.fire({title:"Success..",text:"Ujian Anda Selesai, Semoga Mendapatkan Nilai Terbaik.",icon:"success",showCancelButton:!1,confirmButtonText:"Tutup",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()}))}}):(j.Inertia.get(`/user/exam-groups/${d.exam.id}/grades/${d.grade.id}/sections/${d.section+1}?nextsection=1`),localStorage.removeItem("indexPage"),h.fire({title:"Success!",text:"Lanjut Ke Kolom Berikutnya.",icon:"success",showConfirmButton:!1,timer:1e3}))};return d.exam.total_tolerance!=null&&window.addEventListener("blur",I),d.grade.is_blocked==1&&h.fire({title:"Ujian di Blokir",text:"Masukan Kode Untuk Membuka Blokir",input:"password",icon:"error",inputAttributes:{autocapitalize:"off"},showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Buka Blokir",showLoaderOnConfirm:!0,preConfirm:u=>{H.get(`/user/exam-groups/${d.exam.id}/grades/${d.grade.id}/unblocked`,{params:{token:u}}).then(c=>{c.data.success==!0?h.fire({title:"Blokir Berhasil Dibuka",text:"Silakan Lanjut Mengerjakan Soal.",icon:"success",showCancelButton:!1,confirmButtonText:"Oke",allowOutsideClick:!1}).then(_=>{_.isConfirmed&&location.reload()}):h.fire({title:"Gagal",text:c.data.message,icon:"error",showCancelButton:!1,confirmButtonText:"Ulangi",allowOutsideClick:!1}).then(_=>{_.isConfirmed&&location.reload()})}).catch(c=>{console.error("Request failed:",c),h.showValidationMessage(`Request failed: ${c}`)})}}),{indexPage:s,options:t,duration:x,handleChangeDuration:w,prevPage:l,nextPage:g,clickQuestion:J,submitAnswer:R,getMyAnswer:D,showModalEndExam:K,showModalEndTimeExam:U,endExam:Q,confirm:I,checkConnection:A,loadMath:i}},methods:{transform(d){return Object.entries(d).forEach(([s,n])=>{const t=n<10?`0${n}`:n;d[s]=`${t}`}),d}}},p={class:"navbar navbar-expand-lg navbar-light bg-white rounded fixed-top rounded-0 shadow-sm"},$={class:"container-fluid"},tt=e("a",{class:"navbar-brand",href:"#"},null,-1),et=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent1","aria-controls":"navbarSupportedContent1","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1),nt={class:"collapse navbar-collapse",id:"navbarSupportedContent1"},at={class:"navbar-nav ms-auto mb-2 mb-lg-0"},ot=e("li",{class:"nav-item"},[e("a",{class:"nav-link","aria-current":"page",href:"/user/dashboard"},[e("i",{class:"bx bx-home-alt me-1"}),y("Home")])],-1),it={class:"nav-item"},st=e("i",{class:"bx bx-log-out-circle"},null,-1),dt={class:"container",style:{"margin-top":"100px","margin-bottom":"100px"}},lt={class:"row"},rt={class:"card"},ct={class:"card-header bg-primary mb-3"},ut={class:"d-flex justify-content-between"},mt={class:"text-start"},gt={key:0},_t={class:"mb-0 text-white"},ht={class:"badge bg-danger"},bt={class:"text-end"},kt={class:"mb-0 text-white"},xt=e("span",{class:"badge bg-danger mx-3"},"Sisa Waktu",-1),ft={key:0,class:"badge bg-danger"},yt={key:1,class:"badge bg-danger"},vt={class:"card-body"},wt={key:0},Ct=["innerHTML"],Et={key:0},St={width:"50",style:{padding:"10px"}},Lt=["onClick"],Mt=["onClick"],At={style:{padding:"10px"}},Tt=["innerHTML"],Bt={key:1},jt={width:"30"},It=["innerHTML"],Ot={key:1},Pt=e("div",{class:"alert alert-danger border-0 shadow"},[e("i",{class:"fa fa-exclamation-triangle"}),y(" Question Not Found!. ")],-1),qt=[Pt],Nt={key:0,class:"mt-3 mb-3 m-3"},Ht=["onClick"],Jt=["onClick"],Dt={class:"card-footer",style:{"min-height":"60px"}},Rt={class:"d-flex justify-content-between"},Kt={class:"text-start"},Ut={key:0},Qt={key:0,class:"text-center"},Vt={key:0},zt={key:1},Wt={class:"card"},Yt=e("div",{class:"card-header text-white bg-primary"},[e("div",{class:"d-flex justify-content-between"},[e("div",null,[e("h5",{class:"mb-0 text-white"},"Navigasi Soal")])])],-1),Ft={class:"card-body",style:{height:"480px","overflow-y":"auto"}},Gt={style:{width:"20%",float:"left"}},Xt={style:{padding:"2px"}},Zt=["onClick"],pt={style:{"font-size":"11px","font-weight":"500"}},$t=["onClick"],te={style:{"font-size":"11px","font-weight":"500"}},ee=["onClick"],ne={style:{"font-size":"11px","font-weight":"500"}},ae={class:"card-footer",style:{"min-height":"60px"}},oe={key:0},ie={key:1},se={class:"modal-dialog"},de={class:"modal-content"},le=e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"Akhiri Try Out ?")],-1),re=e("div",{class:"modal-body"}," Setelah mengakhiri Try Out, Anda tidak dapat kembali ke Try Out ini lagi. Yakin akan mengakhiri Try Out? ",-1),ce={class:"modal-footer"},ue={class:"modal-dialog"},me={class:"modal-content"},ge={class:"modal-header"},_e={key:0,class:"modal-title"},he={key:1,class:"modal-title"},be={class:"modal-body"},ke={key:0},xe=e("strong",{class:"fw-bold"},"Ya",-1),fe={key:1},ye={class:"text-center"},ve={class:"mb-0 text-white"},we={class:"badge bg-danger"},Ce={key:0,class:"modal-footer"};function Ee(d,s,n,t,M,b){const v=B("Head"),x=B("Link"),w=B("VueCountdown");return a(),o(f,null,[C(v,null,{default:E(()=>{var i;return[e("title",null,m((i=d.$page.props.setting.app_name)!=null?i:"Atur Setting Terlebih Dahulu")+" - Try Out",1)]}),_:1}),e("nav",p,[e("div",$,[tt,et,e("div",nt,[e("ul",at,[ot,e("li",it,[C(x,{class:"nav-link",href:"/logout",method:"POST"},{default:E(()=>[st,y("Logout")]),_:1})])])])])]),e("div",dt,[e("div",lt,[e("div",{class:S(["col-md-12 col-sm-12 col-xs-12",n.exam.show_question_number_navigation==1?"col-lg-8":"col-lg-12"])},[e("div",rt,[e("div",ct,[e("div",ut,[e("div",mt,[n.exam.show_question_number==1?(a(),o("div",gt,[e("h4",_t,[e("span",ht,"No. "+m(n.questionLists[t.indexPage].navigation_order),1)])])):r("",!0)]),e("div",bt,[C(w,{transform:b.transform,time:t.duration,onProgress:t.handleChangeDuration,onEnd:s[0]||(s[0]=i=>t.showModalEndTimeExam=!0)},{default:E(({hours:i,minutes:l,seconds:g})=>[e("h4",kt,[xt,n.exam.duration>=60?(a(),o("span",ft,m(i)+" : "+m(l)+" : "+m(g),1)):(a(),o("span",yt,m(l)+" : "+m(g),1))])]),_:1},8,["transform","time","onProgress"])])])]),e("div",vt,[n.questionLists[t.indexPage]?(a(),o("div",wt,[e("div",null,[e("div",{innerHTML:n.questionLists[t.indexPage].question,class:"prevent-select"},null,8,Ct)]),e("table",null,[n.exam.type_option==1?(a(),o("tbody",Et,[(a(!0),o(f,null,L(n.questionLists[t.indexPage].answer_order.split(","),(i,l)=>(a(),o("tr",{key:l},[e("span",null,[e("td",St,[i==t.getMyAnswer(n.questionLists[t.indexPage].question_id)?(a(),o("button",{key:0,onClick:g=>t.submitAnswer(n.questionLists[t.indexPage].question_id,i),class:"btn btn-success text-white"},m(t.options[l]),9,Lt)):(a(),o("button",{key:1,onClick:g=>t.submitAnswer(n.questionLists[t.indexPage].question_id,i),class:"btn btn-outline-primary w-100 no-click-effect"},m(t.options[l]),9,Mt))]),e("td",At,[n.exam.show_answer==1?(a(),o("p",{key:0,class:"prevent-select",innerHTML:n.questionLists[t.indexPage]["option_"+i]},null,8,Tt)):r("",!0)])])]))),128))])):r("",!0),n.exam.type_option==2?(a(),o("tbody",Bt,[n.exam.show_answer==1?(a(!0),o(f,{key:0},L(n.questionLists[t.indexPage].answer_order.split(","),(i,l)=>(a(),o("tr",{key:l},[e("td",jt,[e("p",null,m(t.options[l])+".",1)]),e("td",null,[e("p",{innerHTML:n.questionLists[t.indexPage]["option_"+i]},null,8,It)])]))),128)):r("",!0)])):r("",!0)])])):(a(),o("div",Ot,qt))]),n.exam.type_option==2?(a(),o("div",Nt,[(a(!0),o(f,null,L(n.questionLists[t.indexPage].answer_order.split(","),(i,l)=>(a(),o("span",{key:l},[i==t.getMyAnswer(n.questionLists[t.indexPage].question_id)?(a(),o("button",{key:0,onClick:g=>t.submitAnswer(n.questionLists[t.indexPage].question_id,i),class:"btn btn-secondary text-dark px-lg-5 px-md-5 mb-1 mx-1 rounded-3 no-click-effect-section",style:{"background-color":"#ccc"}},m(t.options[l]),9,Ht)):(a(),o("button",{key:1,onClick:g=>t.submitAnswer(n.questionLists[t.indexPage].question_id,i),class:"btn btn-secondary px-lg-5 px-md-5 mb-1 rounded-3 mx-1 text-dark no-click-effect-section",style:{"background-color":"#ccc"}},m(t.options[l]),9,Jt))]))),128))])):r("",!0),e("div",Dt,[e("div",Rt,[e("div",Kt,[n.exam.show_prev_next_button==1?(a(),o("div",Ut,[t.indexPage>0?(a(),o("button",{key:0,onClick:s[1]||(s[1]=i=>t.prevPage()),type:"button",class:"btn btn-primary me-3"},"Sebelumnya")):r("",!0),t.indexPage<Object.keys(n.questionLists).length-1?(a(),o("button",{key:1,onClick:s[2]||(s[2]=i=>t.nextPage()),type:"button",class:"btn btn-success"},"Selanjutnya")):r("",!0)])):r("",!0)]),n.exam.show_question_number_navigation==0?(a(),o("div",Qt,[n.exam.button_type_finish==1?(a(),o("div",Vt,[n.section==n.lastSection?(a(),o("button",{key:0,onClick:s[3]||(s[3]=i=>t.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"},"Akhiri Try Out")):(a(),o("button",{key:1,onClick:s[4]||(s[4]=(...i)=>t.endExam&&t.endExam(...i)),class:"btn btn-danger btn-md border-0 shadow w-100"},"Lanjut Bagian Berikutnya"))])):(a(),o("div",zt,[n.section==n.lastSection&&t.indexPage>=Object.keys(n.questionLists).length-1?(a(),o("button",{key:0,onClick:s[5]||(s[5]=i=>t.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"},"Akhiri Try Out")):r("",!0),n.section<n.lastSection&&t.indexPage>=Object.keys(n.questionLists).length-1?(a(),o("button",{key:1,onClick:s[6]||(s[6]=(...i)=>t.endExam&&t.endExam(...i)),class:"btn btn-danger btn-md border-0 shadow w-100"},"Lanjut Bagian Berikutnya")):r("",!0)]))])):r("",!0)])])])],2),n.exam.show_question_number_navigation==1?(a(),o("div",{key:0,class:S(["col-md-12 col-sm-12 col-xs-12",{"col-lg-4":n.exam.show_question_number_navigation==1}])},[e("div",Wt,[Yt,e("div",Ft,[(a(!0),o(f,null,L(n.questionLists,(i,l)=>(a(),o("div",{key:l},[e("div",Gt,[e("div",Xt,[l==t.indexPage?(a(),o("button",{key:0,onClick:g=>t.clickQuestion(l),class:"btn btn-primary w-100"},[e("span",pt,m(i.navigation_order),1)],8,Zt)):r("",!0),l!=t.indexPage&&t.getMyAnswer(i.question_id)==0?(a(),o("button",{key:1,onClick:g=>t.clickQuestion(l),class:"btn btn-light w-100"},[e("span",te,m(i.navigation_order),1)],8,$t)):r("",!0),l!=t.indexPage&&t.getMyAnswer(i.question_id)!=0?(a(),o("button",{key:2,onClick:g=>t.clickQuestion(l),class:"btn btn-success w-100"},[e("span",ne,m(i.navigation_order),1)],8,ee)):r("",!0)])])]))),128))]),e("div",ae,[n.exam.button_type_finish==1?(a(),o("div",oe,[n.section==n.lastSection?(a(),o("button",{key:0,onClick:s[7]||(s[7]=i=>t.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"},"Akhiri Try Out")):(a(),o("button",{key:1,onClick:s[8]||(s[8]=(...i)=>t.endExam&&t.endExam(...i)),class:"btn btn-danger btn-md border-0 shadow w-100"},"Lanjut Bagian Berikutnya"))])):(a(),o("div",ie,[n.section==n.lastSection&&t.indexPage>=Object.keys(n.questionLists).length-1?(a(),o("button",{key:0,onClick:s[9]||(s[9]=i=>t.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"},"Akhiri Try Out")):r("",!0),n.section<n.lastSection&&t.indexPage>=Object.keys(n.questionLists).length-1?(a(),o("button",{key:1,onClick:s[10]||(s[10]=(...i)=>t.endExam&&t.endExam(...i)),class:"btn btn-danger btn-md border-0 shadow w-100"},"Lanjut Bagian Berikutnya")):r("",!0)]))])])],2)):r("",!0)])]),t.showModalEndExam?(a(),o("div",{key:0,class:S(["modal fade",{show:t.showModalEndExam}]),tabindex:"-1","aria-hidden":"true",style:{display:"block"},role:"dialog"},[e("div",se,[e("div",de,[le,re,e("div",ce,[e("button",{onClick:s[11]||(s[11]=(...i)=>t.endExam&&t.endExam(...i)),type:"button",class:"btn btn-primary"},"Ya, Akhiri"),e("button",{onClick:s[12]||(s[12]=i=>t.showModalEndExam=!1),type:"button",class:"btn btn-secondary"},"Tutup")])])])],2)):r("",!0),t.showModalEndTimeExam?(a(),o("div",{key:1,class:S(["modal fade",{show:t.showModalEndTimeExam}]),"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-hidden":"true",style:{display:"block","z-index":"9999"},role:"dialog"},[e("div",ue,[e("div",me,[e("div",ge,[n.section==n.lastSection?(a(),o("h5",_e,"Waktu Habis !")):(a(),o("h5",he," Lanjut ke bagian selanjutnya dalam hitungan : "))]),e("div",be,[n.section==n.lastSection?(a(),o("div",ke,[y("Waktu Try Out sudah berakhir!. Klik "),xe,y(" untuk mengakhiri Try Out.")])):(a(),o("div",fe,[e("div",ye,[C(w,{time:5e3,onProgress:t.handleChangeDuration,onEnd:t.endExam},{default:E(({hours:i,minutes:l,seconds:g})=>[e("h2",ve,[e("span",we,m(g),1)])]),_:1},8,["onProgress","onEnd"])])]))]),n.section==n.lastSection?(a(),o("div",Ce,[e("button",{onClick:s[13]||(s[13]=(...i)=>t.endExam&&t.endExam(...i)),type:"button",class:"btn btn-primary"},"Ya")])):r("",!0)])])],2)):r("",!0)],64)}const je=X(Z,[["render",Ee]]);export{je as default};
