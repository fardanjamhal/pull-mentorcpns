import{L as z,i as Y}from"./vue-countdown.esm.4f94d9eb.js";import{p as F,e as q,t as O}from"./index.es.7b18e2cf.js";import{a as N}from"./index.6c3ee187.js";import{H as G,L as W,z as x,r as H,o as a,c as i,a as M,w as A,b as n,n as w,t as m,e as r,F as y,d as v,g as C,h as B}from"./app.7a9487cc.js";import{S as g}from"./sweetalert2.all.ff6df5ca.js";import{_ as X}from"./_plugin-vue_export-helper.cdc0426e.js";const Z={layout:z,components:{Head:G,Link:W,VueCountdown:Y,MathJax:F},props:{id:String,page:Number,exam:Object,duration:Object,questionLists:Object,section:Number,lastSection:Number,grade:Object,indexPage:Object},mounted(){let d=document.createElement("script");d.setAttribute("src","/assets/js/MathJax.js?config=TeX-AMS-MML_HTMLorMML"),document.head.appendChild(d);function s(){const t=document.getElementById("elementId");O(t)}q({},s)},setup(d){var s,t=localStorage.getItem("indexPage");t!==null?s=x(t):s=x(d.indexPage);let e=["A","B","C","D","E"];(d.exam.id!=localStorage.getItem("examId")||d.grade.user_id!=localStorage.getItem("userId"))&&(localStorage.setItem("examId",d.exam.id),localStorage.setItem("userId",d.grade.user_id),localStorage.setItem("myAnswers",[]));const E=localStorage.getItem("myAnswers");let b=E?JSON.parse(E):[];localStorage.setItem("myAnswers",JSON.stringify(b)),localStorage.setItem("examId",d.exam.id);const f=x(0),k=x(d.duration),o=()=>{k.value=k.value-1e3,f.value=f.value+1},l=()=>{let u=document.createElement("script");u.setAttribute("src","/assets/js/MathJax.js?config=TeX-AMS-MML_HTMLorMML"),document.head.appendChild(u);function c(){const _=document.getElementById("elementId");O(_)}q({},c)},h=()=>{s.value=parseInt(s.value)-1,l()},I=()=>{s.value=parseInt(s.value)+1,l()},J=u=>{s.value=u,l()},T=()=>{if(d.grade.is_blocked!=1){let u=parseInt(d.grade.total_tolerance)>0?parseInt(d.grade.total_tolerance)-1:0,c=u==0?"Tolerasi habis, ":"Toleransi Tersisa "+u+" kali lagi, ";g.fire({title:"UJIAN AKAN DI DIBLOKIR JIKA ANDA MENINGGAL SESI UJIAN",text:c+" jika toleransi habis anda tidak dapat melanjutkan ujian dan harus menghubungi admin",icon:"warning",showCancelButton:!1,confirmButtonColor:"#d33",cancelButtonColor:"#d33",confirmButtonText:"Mengerti",allowOutsideClick:!1}).then(_=>{_.isConfirmed&&B.Inertia.post(`/user/exams/${d.exam.id}/decrement-tolerance`,{grade_id:d.grade.id},{onSuccess:()=>{location.reload()}})})}},D=u=>{const c=b.find(_=>_.question_id===u);return c?c.answer:0};let P=0;const R=(u,c)=>{const _={question_id:u,answer:c},j=b.findIndex(L=>L.question_id===_.question_id);j!==-1?b[j].answer=_.answer:b.push(_);try{P%20===0&&S(),localStorage.setItem("indexPage",s.value),localStorage.setItem("myAnswers",JSON.stringify(b)),P++,s.value<Object.keys(d.questionLists).length-1&&I()}catch(L){g.fire({title:"Error",text:"Submit Jawaban Error, silakan lakukan refresh dan pastikan perangkat terhubungan dengan jaringan."+L,icon:"error",showCancelButton:!1,confirmButtonText:"Refresh",allowOutsideClick:!1}).then(V=>{V.isConfirmed&&location.reload()})}},U=x(!1),K=x(!1),S=()=>{N.get("/check-connection").then(u=>{}).catch(u=>{g.fire({title:"Error",text:`Submit Jawaban Error, silakan lakukan refresh dan pastikan perangkat terhubungan dengan jaringan.
`+u,icon:"error",showCancelButton:!1,confirmButtonText:"Refresh",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()})})},Q=(u="")=>{S(),d.section==d.lastSection||u=="block"?B.Inertia.post(`/user/exams/${d.exam.id}/exam-end`,{exam_id:d.exam.id,grade_id:d.grade.id,myAnswers:b},{onSuccess:()=>{u=="block"?g.fire({title:"UJIAN DIBLOKIR KARENA SUDAH MELEWATI BATAS TOLERANSI.",text:"Anda tidak dapat melanjutkan ujian, silakan hubungi admin",icon:"warning",showCancelButton:!1,confirmButtonColor:"#d33",confirmButtonText:"Mengerti",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()}):(localStorage.removeItem("indexPage"),g.fire({title:"Success..",text:"Ujian Anda Selesai, Semoga Mendapatkan Nilai Terbaik.",icon:"success",showCancelButton:!1,confirmButtonText:"Tutup",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()}))}}):(B.Inertia.get(`/user/exams/${d.exam.id}/grades/${d.grade.id}/sections/${d.section+1}?nextsection=1`),localStorage.removeItem("indexPage"),g.fire({title:"Success!",text:"Lanjut Ke Kolom Berikutnya.",icon:"success",showConfirmButton:!1,timer:1e3}))};return d.exam.total_tolerance!=null&&window.addEventListener("blur",T),d.grade.is_blocked==1&&g.fire({title:"Ujian di Blokir",text:"Masukan Kode Untuk Membuka Blokir",input:"text",icon:"error",inputAttributes:{autocapitalize:"off"},showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Buka Blokir",showLoaderOnConfirm:!0,preConfirm:u=>{N.get(`/user/exams/${d.exam.id}/grades/${d.grade.id}/unblocked`,{params:{token:u}}).then(c=>{c.data.success==!0?g.fire({title:"Blokir Berhasil Dibuka",text:"Silakan Lanjut Mengerjakan Soal.",icon:"success",showCancelButton:!1,confirmButtonText:"Oke",allowOutsideClick:!1}).then(_=>{_.isConfirmed&&location.reload()}):g.fire({title:"Gagal",text:c.data.message,icon:"error",showCancelButton:!1,confirmButtonText:"Ulangi",allowOutsideClick:!1}).then(_=>{_.isConfirmed&&location.reload()})}).catch(c=>{console.error("Request failed:",c),g.showValidationMessage(`Request failed: ${c}`)})}}),{indexPage:s,options:e,duration:k,handleChangeDuration:o,prevPage:h,nextPage:I,clickQuestion:J,submitAnswer:R,getMyAnswer:D,showModalEndExam:U,showModalEndTimeExam:K,endExam:Q,confirm:T,checkConnection:S,loadMath:l}},methods:{transform(d){return Object.entries(d).forEach(([s,t])=>{const e=t<10?`0${t}`:t;d[s]=`${e}`}),d}}},$={class:"container",style:{"margin-top":"20px","margin-bottom":"20px"}},p={class:"row"},ee={class:"card"},te={class:"card-header bg-primary mb-3"},ne={class:"d-flex justify-content-between"},ae={class:"text-start"},ie={key:0},oe={class:"mb-0 text-white"},se={class:"badge"},de={class:"text-end"},le={class:"mb-0 text-white"},re={key:0,class:"badge"},ce={key:1,class:"badge"},ue={class:"card-body"},me={key:0},he=["innerHTML"],_e={key:0},ge={width:"50",style:{padding:"10px"}},be=["onClick"],ke=["onClick"],xe={style:{padding:"10px"}},ye=["innerHTML"],fe={key:1},we={width:"30"},ve=["innerHTML"],Ce={key:1},Ee=n("div",{class:"alert alert-danger border-0 shadow"},[n("i",{class:"fa fa-exclamation-triangle"}),C(" Question Not Found!. ")],-1),Se=[Ee],Le={key:0,class:"mt-3 mb-3 m-3"},Me=["onClick"],Ae=["onClick"],Be={class:"card-footer",style:{"min-height":"60px"}},Ie={class:"d-flex justify-content-center"},Te={class:"text-start"},Pe={key:0},je={key:0,class:"text-center"},qe={key:0},Oe={key:1},Ne={class:"card"},He=n("div",{class:"card-header text-white bg-primary"},[n("div",{class:"d-flex justify-content-between"},[n("div",null,[n("h5",{class:"mb-0 text-white"},"Navigasi Soal")])])],-1),Je={class:"card-body",style:{height:"auto","overflow-y":"auto"}},De={style:{width:"20%",float:"left"}},Re={style:{padding:"2px"}},Ue=["onClick"],Ke={style:{"font-size":"11px","font-weight":"500"}},Qe=["onClick"],Ve={style:{"font-size":"11px","font-weight":"500"}},ze=["onClick"],Ye={style:{"font-size":"11px","font-weight":"500"}},Fe={class:"card-footer",style:{"min-height":"60px"}},Ge={key:0},We={key:1},Xe={class:"modal-dialog"},Ze={class:"modal-content"},$e=n("div",{class:"modal-header"},[n("h5",{class:"modal-title"},"Akhiri Try Out ?")],-1),pe=n("div",{class:"modal-body"}," Setelah mengakhiri Try Out, Anda tidak dapat kembali ke Try Out ini lagi. Yakin akan mengakhiri Try Out? ",-1),et={class:"modal-footer"},tt={class:"modal-dialog"},nt={class:"modal-content"},at={class:"modal-header"},it={key:0,class:"modal-title"},ot={key:1,class:"modal-title"},st={class:"modal-body"},dt={key:0},lt=n("strong",{class:"fw-bold"},"Ya",-1),rt={key:1},ct={class:"text-center"},ut={class:"mb-0 text-white"},mt={class:"badge bg-danger"},ht={key:0,class:"modal-footer"};function _t(d,s,t,e,E,b){const f=H("Head"),k=H("VueCountdown");return a(),i(y,null,[M(f,null,{default:A(()=>{var o;return[n("title",null,m((o=d.$page.props.setting.app_name)!=null?o:"Atur Setting Terlebih Dahulu")+" - Sesi Ujian",1)]}),_:1}),n("div",$,[n("div",p,[n("div",{class:w(["col-md-12 col-sm-12 col-xs-12",t.exam.show_question_number_navigation==1?"col-lg-8":"col-lg-12"])},[n("div",ee,[n("div",te,[n("div",ne,[n("div",ae,[t.exam.show_question_number==1?(a(),i("div",ie,[n("h4",oe,[n("span",se,"No. "+m(t.questionLists[e.indexPage].navigation_order),1)])])):r("",!0)]),n("div",de,[M(k,{transform:b.transform,time:e.duration,onProgress:e.handleChangeDuration,onEnd:s[0]||(s[0]=o=>e.showModalEndTimeExam=!0)},{default:A(({hours:o,minutes:l,seconds:h})=>[n("h4",le,[t.exam.duration>=60?(a(),i("span",re,m(o)+" : "+m(l)+" : "+m(h),1)):(a(),i("span",ce,m(l)+" : "+m(h),1))])]),_:1},8,["transform","time","onProgress"])])])]),n("div",ue,[t.questionLists[e.indexPage]?(a(),i("div",me,[n("div",null,[n("div",{innerHTML:t.questionLists[e.indexPage].question,class:"prevent-select clearfix"},null,8,he)]),n("table",null,[t.exam.type_option==1?(a(),i("tbody",_e,[(a(!0),i(y,null,v(t.questionLists[e.indexPage].answer_order.split(","),(o,l)=>(a(),i("tr",{key:l},[n("span",null,[n("td",ge,[o==e.getMyAnswer(t.questionLists[e.indexPage].question_id)?(a(),i("button",{key:0,onClick:h=>e.submitAnswer(t.questionLists[e.indexPage].question_id,o),class:"btn btn-primary text-white"},m(e.options[l]),9,be)):(a(),i("button",{key:1,onClick:h=>e.submitAnswer(t.questionLists[e.indexPage].question_id,o),class:"btn btn-outline-primary w-100 no-click-effect"},m(e.options[l]),9,ke))]),n("td",xe,[t.exam.show_answer==1?(a(),i("p",{key:0,class:"prevent-select",innerHTML:t.questionLists[e.indexPage]["option_"+o]},null,8,ye)):r("",!0)])])]))),128))])):r("",!0),t.exam.type_option==2?(a(),i("tbody",fe,[t.exam.show_answer==1?(a(!0),i(y,{key:0},v(t.questionLists[e.indexPage].answer_order.split(","),(o,l)=>(a(),i("tr",{key:l},[n("td",we,[n("p",null,m(e.options[l])+".",1)]),n("td",null,[n("p",{innerHTML:t.questionLists[e.indexPage]["option_"+o]},null,8,ve)])]))),128)):r("",!0)])):r("",!0)])])):(a(),i("div",Ce,Se))]),t.exam.type_option==2?(a(),i("div",Le,[(a(!0),i(y,null,v(t.questionLists[e.indexPage].answer_order.split(","),(o,l)=>(a(),i("span",{key:l},[o==e.getMyAnswer(t.questionLists[e.indexPage].question_id)?(a(),i("button",{key:0,onClick:h=>e.submitAnswer(t.questionLists[e.indexPage].question_id,o),class:"btn btn-secondary text-dark px-lg-5 px-md-5 mb-1 mx-1 rounded-3 no-click-effect-section",style:{"background-color":"#ccc"}},m(e.options[l]),9,Me)):(a(),i("button",{key:1,onClick:h=>e.submitAnswer(t.questionLists[e.indexPage].question_id,o),class:"btn btn-secondary px-lg-5 px-md-5 mb-1 rounded-3 mx-1 text-dark no-click-effect-section",style:{"background-color":"#ccc"}},m(e.options[l]),9,Ae))]))),128))])):r("",!0),n("div",Be,[n("div",Ie,[n("div",Te,[t.exam.show_prev_next_button==1?(a(),i("div",Pe,[e.indexPage>0?(a(),i("button",{key:0,onClick:s[1]||(s[1]=o=>e.prevPage()),type:"button",class:"btn btn-danger btn-md border-0 shadow",style:{width:"9vh"}},"<<")):r("",!0),C(" \xA0 "),e.indexPage<Object.keys(t.questionLists).length-1?(a(),i("button",{key:1,onClick:s[2]||(s[2]=o=>e.nextPage()),type:"button",class:"btn btn-danger btn-md border-0 shadow",style:{width:"9vh"}},">>")):r("",!0)])):r("",!0)]),t.exam.show_question_number_navigation==0?(a(),i("div",je,[t.exam.button_type_finish==1?(a(),i("div",qe,[t.section==t.lastSection?(a(),i("button",{key:0,onClick:s[3]||(s[3]=o=>e.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"},"Akhiri Try Out")):(a(),i("button",{key:1,onClick:s[4]||(s[4]=(...o)=>e.endExam&&e.endExam(...o)),class:"btn btn-danger btn-md border-0 shadow w-100"},"Lanjut Bagian Berikutnya"))])):(a(),i("div",Oe,[t.section==t.lastSection&&e.indexPage>=Object.keys(t.questionLists).length-1?(a(),i("button",{key:0,onClick:s[5]||(s[5]=o=>e.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"},"Akhiri Try Out")):r("",!0),t.section<t.lastSection&&e.indexPage>=Object.keys(t.questionLists).length-1?(a(),i("button",{key:1,onClick:s[6]||(s[6]=(...o)=>e.endExam&&e.endExam(...o)),class:"btn btn-danger btn-md border-0 shadow w-100"},"Lanjut Bagian Berikutnya")):r("",!0)]))])):r("",!0)])])])],2),t.exam.show_question_number_navigation==1?(a(),i("div",{key:0,class:w(["col-md-12 col-sm-12 col-xs-12",{"col-lg-4":t.exam.show_question_number_navigation==1}])},[n("div",Ne,[He,n("div",Je,[(a(!0),i(y,null,v(t.questionLists,(o,l)=>(a(),i("div",{key:l},[n("div",De,[n("div",Re,[l==e.indexPage?(a(),i("button",{key:0,onClick:h=>e.clickQuestion(l),class:"btn btn-primary w-100"},[n("span",Ke,m(o.navigation_order),1)],8,Ue)):r("",!0),l!=e.indexPage&&e.getMyAnswer(o.question_id)==0?(a(),i("button",{key:1,onClick:h=>e.clickQuestion(l),class:"btn btn-light w-100"},[n("span",Ve,m(o.navigation_order),1)],8,Qe)):r("",!0),l!=e.indexPage&&e.getMyAnswer(o.question_id)!=0?(a(),i("button",{key:2,onClick:h=>e.clickQuestion(l),class:"btn btn-danger w-100"},[n("span",Ye,m(o.navigation_order),1)],8,ze)):r("",!0)])])]))),128))]),n("div",Fe,[t.exam.button_type_finish==1?(a(),i("div",Ge,[t.section==t.lastSection?(a(),i("button",{key:0,onClick:s[7]||(s[7]=o=>e.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"},"Akhiri Try Out")):(a(),i("button",{key:1,onClick:s[8]||(s[8]=(...o)=>e.endExam&&e.endExam(...o)),class:"btn btn-danger btn-md border-0 shadow w-100"},"Lanjut Bagian Berikutnya"))])):(a(),i("div",We,[t.section==t.lastSection&&e.indexPage>=Object.keys(t.questionLists).length-1?(a(),i("button",{key:0,onClick:s[9]||(s[9]=o=>e.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"},"Akhiri Try Out")):r("",!0),t.section<t.lastSection&&e.indexPage>=Object.keys(t.questionLists).length-1?(a(),i("button",{key:1,onClick:s[10]||(s[10]=(...o)=>e.endExam&&e.endExam(...o)),class:"btn btn-danger btn-md border-0 shadow w-100"},"Lanjut Bagian Berikutnya")):r("",!0)]))])])],2)):r("",!0)])]),e.showModalEndExam?(a(),i("div",{key:0,class:w(["modal fade",{show:e.showModalEndExam}]),tabindex:"-1","aria-hidden":"true",style:{display:"block"},role:"dialog"},[n("div",Xe,[n("div",Ze,[$e,pe,n("div",et,[n("button",{onClick:s[11]||(s[11]=(...o)=>e.endExam&&e.endExam(...o)),type:"button",class:"btn btn-danger",style:{width:"6rem"}},"Ya"),n("button",{onClick:s[12]||(s[12]=o=>e.showModalEndExam=!1),type:"button",class:"btn btn-secondary",style:{width:"6rem"}},"Tidak")])])])],2)):r("",!0),e.showModalEndTimeExam?(a(),i("div",{key:1,class:w(["modal fade",{show:e.showModalEndTimeExam}]),"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-hidden":"true",style:{display:"block","z-index":"9999"},role:"dialog"},[n("div",tt,[n("div",nt,[n("div",at,[t.section==t.lastSection?(a(),i("h5",it,"Waktu Habis !")):(a(),i("h5",ot," Lanjut ke bagian selanjutnya dalam hitungan : "))]),n("div",st,[t.section==t.lastSection?(a(),i("div",dt,[C("Waktu Try Out sudah berakhir!. Klik "),lt,C(" untuk mengakhiri Try Out.")])):(a(),i("div",rt,[n("div",ct,[M(k,{time:5e3,onProgress:e.handleChangeDuration,onEnd:e.endExam},{default:A(({hours:o,minutes:l,seconds:h})=>[n("h2",ut,[n("span",mt,m(h),1)])]),_:1},8,["onProgress","onEnd"])])]))]),t.section==t.lastSection?(a(),i("div",ht,[n("button",{onClick:s[13]||(s[13]=(...o)=>e.endExam&&e.endExam(...o)),type:"button",class:"btn btn-primary"},"Ya")])):r("",!0)])])],2)):r("",!0)],64)}const wt=X(Z,[["render",_t]]);export{wt as default};
