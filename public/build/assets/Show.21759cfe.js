import{L as g}from"./Layout.70398840.js";import{L as k,H as w,j as T,r as m,o as a,c as e,a as d,w as i,b as s,e as n,K as x,F as u,d as v,h as S,f as L,t as r,g as y}from"./app.6cf705fe.js";import{S as P}from"./sweetalert2.all.76868986.js";import{_ as K}from"./_plugin-vue_export-helper.cdc0426e.js";const H={layout:g,components:{Link:k,Head:w},props:{errors:Object,transaction:Object,banks:Object},setup(o){const c=T({payment_method:""});return{form:c,submit:()=>{S.Inertia.post(`/user/vouchers/${o.voucher.id}/buy`,{payment_method:c.payment_method},{onSuccess:()=>{P.fire({title:"Success!",text:"Silakan Lakukan Pembayaran",icon:"success",showConfirmButton:!1,timer:1e3})}})},pay:()=>{window.snap.pay(o.transaction.snap_token,{onSuccess:()=>{this.$inertia.visit($page.props.setting.app_url)},onPending:()=>{this.$inertia.visit($page.props.setting.app_url)},onError:()=>{this.$inertia.visit($page.props.setting.app_url)}})}}},methods:{formatPrice(o){return"Rp."+(o/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}},M={class:"page-wrapper"},B={class:"page-content"},C=L('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Detail Transaksi</li></ol></nav></div></div>',1),D={class:"row"},N={class:"col-lg-12"},j={key:0,class:"alert alert-danger border-0 alert-dismissible fade show"},V=["innerHTML"],A=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),O={key:1,class:"alert alert-danger border-0 alert-dismissible fade show"},E=["innerHTML"],F=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),R={key:2,class:"alert alert-success border-0 alert-dismissible fade show"},G=["innerHTML"],I=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),J={class:"col-lg-12"},U={class:"card border-top border-0 border-3 border-primary"},W={class:"card-header"},q={class:"d-lg-flex align-items-center"},z={class:"ms-auto"},Q={class:"card-body p-4"},X=s("h5",{class:"mb-3"},"Data Pembeli",-1),Y={class:"row mb-3"},Z=s("label",{class:"col-sm-3 col-form-label"},"Nama Lengkap",-1),$={class:"col-sm-9"},ss=["value"],ts={class:"row mb-3"},as=s("label",{class:"col-sm-3 col-form-label"},"Email",-1),es={class:"col-sm-9"},os=["value"],ns={class:"row mb-3"},ls=s("label",{class:"col-sm-3 col-form-label"},"Nomor Telepon (Whatsapp)",-1),cs={class:"col-sm-9"},is=["value"],rs=s("h5",{class:"mb-3"},"Detail Transaksi",-1),ds={class:"row mb-3"},_s=s("label",{class:"col-sm-3 col-form-label"},"Kode Transaksi",-1),ms={class:"col-sm-9"},us=["value"],bs={class:"row mb-3"},hs=s("label",{class:"col-sm-3 col-form-label"},"Tanggal Transaksi",-1),fs={class:"col-sm-9"},vs=["value"],ys={class:"row mb-3"},ps=s("label",{class:"col-sm-3 col-form-label"},"Kategori Peminatan",-1),gs={class:"col-sm-9"},ks=["value"],ws={class:"row mb-3"},Ts=s("label",{class:"col-sm-3 col-form-label"},"Deskripsi Transaksi",-1),xs={class:"col-sm-9"},Ss=["value"],Ls={class:"row mb-3"},Ps=s("label",{class:"col-sm-3 col-form-label"},"Kategori Member",-1),Ks={class:"col-sm-9"},Hs={class:"badge bg-success m-1"},Ms={key:1,class:"badge bg-success"},Bs={class:"row mb-3"},Cs=s("label",{class:"col-sm-3 col-form-label"},"Metode Pembayaran",-1),Ds={class:"col-sm-9"},Ns={class:"form-select",disabled:"",style:{"background-color":"#fff"}},js=["selected"],Vs=["selected"],As=["selected"],Os={class:"row mb-3"},Es=s("label",{class:"col-sm-3 col-form-label"},"Total Transaksi",-1),Fs={class:"col-sm-9"},Rs=["value"],Gs={class:"row mb-3"},Is=s("label",{class:"col-sm-3 col-form-label"},"Status Transaksi",-1),Js={class:"col-sm-9"},Us={key:0,class:"fw-bold"},Ws={key:1,class:"fw-bold"},qs={key:2,class:"fw-bold"},zs={key:3,class:"fw-bold"},Qs={key:4,class:"fw-bold"},Xs={key:0,class:"row mb-3"},Ys=s("label",{class:"col-sm-3 col-form-label"},"Action",-1),Zs={class:"col-sm-9"},$s={key:1},st=s("h5",{class:"mb-3"},"Data Konfirmasi Pembayaran",-1),tt={class:"row mb-3"},at=s("label",{class:"col-sm-3 col-form-label"},"Nama Pengirim Transfer",-1),et={class:"col-sm-9"},ot=["value"],nt={class:"row mb-3"},lt=s("label",{class:"col-sm-3 col-form-label"},"Di Transfer Ke Rekening",-1),ct={class:"col-sm-9"},it=["value"],rt={class:"row mb-3"},dt=s("label",{class:"col-sm-3 col-form-label"},"Tanggal Transfer",-1),_t={class:"col-sm-9"},mt=["value"],ut={class:"row mb-3"},bt=s("label",{class:"col-sm-3 col-form-label"},"Jumlah Transfer",-1),ht={class:"col-sm-9"},ft=["value"],vt={class:"row mb-3"},yt=s("label",{class:"col-sm-3 col-form-label"},"Bukti Transfer",-1),pt={class:"col-sm-9"},gt=["src"],kt={key:2,class:"row"},wt={class:"col-lg-12"},Tt=s("h6",{class:"text-center"},"Silakan lakukan pembayaran melalui rekening berikut ini dan lakukan konfirmasi",-1),xt=s("br",null,null,-1),St={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-3"},Lt={class:"col"},Pt={class:"card"},Kt={style:{height:"75px"}},Ht=["src"],Mt={class:"card-body"},Bt={class:"card-title"},Ct={class:"card-text"},Dt={class:"card-text"};function Nt(o,c,t,_,jt,b){const p=m("Head"),h=m("Link"),f=m("center");return a(),e(u,null,[d(p,null,{default:i(()=>{var l;return[s("title",null,r((l=o.$page.props.setting.app_name)!=null?l:"Atur Setting Terlebih Dahulu")+" - Transaksi",1)]}),_:1}),s("div",M,[s("div",B,[C,s("div",D,[s("div",N,[o.$page.props.session.failed?(a(),e("div",j,[s("div",{innerHTML:o.$page.props.session.failed},null,8,V),A])):n("",!0),o.$page.props.session.error?(a(),e("div",O,[s("div",{innerHTML:o.$page.props.session.error},null,8,E),F])):n("",!0),o.$page.props.session.success?(a(),e("div",R,[s("div",{innerHTML:o.$page.props.session.success},null,8,G),I])):n("",!0)]),s("div",J,[s("div",U,[s("div",W,[s("div",q,[s("div",z,[t.transaction.transaction_status=="pending"&&t.transaction.payment_method=="manual_transfer"?(a(),x(h,{key:0,href:`/user/transactions/${t.transaction.id}/payment-confirmations`,class:"btn btn-danger btn-sm mt-lg-0 mx-1"},{default:i(()=>[y("Konfirmasi Pembayaran")]),_:1},8,["href"])):n("",!0),d(h,{href:"/user/transactions",class:"btn btn-primary btn-sm mt-lg-0"},{default:i(()=>[y("Kembali")]),_:1})])])]),s("div",Q,[X,s("div",Y,[Z,s("div",$,[s("input",{type:"text",class:"form-control",value:t.transaction.user.name,disabled:"",style:{"background-color":"#fff"}},null,8,ss)])]),s("div",ts,[as,s("div",es,[s("input",{type:"text",class:"form-control",value:t.transaction.user.email,disabled:"",style:{"background-color":"#fff"}},null,8,os)])]),s("div",ns,[ls,s("div",cs,[s("input",{type:"text",class:"form-control",value:t.transaction.user.student&&t.transaction.user.student.phone_number?t.transaction.user.student.phone_number:"-",disabled:"",style:{"background-color":"#fff"}},null,8,is)])]),rs,s("div",ds,[_s,s("div",ms,[s("input",{type:"text",class:"form-control",value:t.transaction.code,disabled:"",style:{"background-color":"#fff"}},null,8,us)])]),s("div",bs,[hs,s("div",fs,[s("input",{type:"text",class:"form-control",value:t.transaction.created_at,disabled:"",style:{"background-color":"#fff"}},null,8,vs)])]),s("div",ys,[ps,s("div",gs,[s("input",{type:"text",class:"form-control",value:t.transaction.category.name,disabled:"",style:{"background-color":"#fff"}},null,8,ks)])]),s("div",ws,[Ts,s("div",xs,[s("input",{type:"text",class:"form-control",value:t.transaction.description,disabled:"",style:{"background-color":"#fff"}},null,8,Ss)])]),s("div",Ls,[Ps,s("div",Ks,[t.transaction.member_categories?(a(!0),e(u,{key:0},v(t.transaction.member_categories,l=>(a(),e("span",Hs,r(l),1))),256)):(a(),e("span",Ms,"Untuk Seluruh Kategori Member"))])]),s("div",Bs,[Cs,s("div",Ds,[s("select",Ns,[s("option",{value:"account_balance",selected:t.transaction.payment_method=="account_balance"},"Saldo Akun",8,js),s("option",{value:"manual_transfer",selected:t.transaction.payment_method=="manual_transfer"},"Transfer Manual (Konfirmasi Pembayaran)",8,Vs),s("option",{value:"automatic_transfer_midtrans",selected:t.transaction.payment_method=="automatic_transfer_midtrans"},"Transfer Otomatis",8,As)])])]),s("div",Os,[Es,s("div",Fs,[s("input",{type:"text",class:"form-control",value:b.formatPrice(t.transaction.total_payment),disabled:"",style:{"background-color":"#fff"}},null,8,Rs)])]),s("div",Gs,[Is,s("div",Js,[t.transaction.transaction_status=="pending"?(a(),e("span",Us,"Pending - Belum melakukan pembayaran")):n("",!0),t.transaction.transaction_status=="paid"?(a(),e("span",Ws,"Telah melakukan pembayaran")):n("",!0),t.transaction.transaction_status=="failed"?(a(),e("span",qs,"Transaksi Gagal")):n("",!0),t.transaction.transaction_status=="done"?(a(),e("span",zs,"Transaksi Selesai")):n("",!0),t.transaction.transaction_status=="expired"?(a(),e("span",Qs,"Transaksi Kadaluarsa")):n("",!0)])]),t.transaction.payment_method=="automatic_transfer_midtrans"&&t.transaction.transaction_status=="pending"?(a(),e("div",Xs,[Ys,s("div",Zs,[s("button",{onClick:c[0]||(c[0]=(...l)=>_.pay&&_.pay(...l)),class:"btn btn-primary btn-sm"},"Bayar Transaksi Sekarang")])])):n("",!0),t.transaction.payment_method=="manual_transfer"&&t.transaction.payment_confirmation?(a(),e("div",$s,[st,s("div",tt,[at,s("div",et,[s("input",{type:"text",class:"form-control",value:t.transaction.payment_confirmation.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,ot)])]),s("div",nt,[lt,s("div",ct,[s("input",{type:"text",class:"form-control",value:t.transaction.payment_confirmation.bank.bank_name+" - "+t.transaction.payment_confirmation.bank.rekening_number+" - "+t.transaction.payment_confirmation.bank.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,it)])]),s("div",rt,[dt,s("div",_t,[s("input",{type:"text",class:"form-control",value:t.transaction.payment_confirmation.transfer_date,disabled:"",style:{"background-color":"#fff"}},null,8,mt)])]),s("div",ut,[bt,s("div",ht,[s("input",{type:"text",class:"form-control",value:b.formatPrice(t.transaction.payment_confirmation.total_payment),disabled:"",style:{"background-color":"#fff"}},null,8,ft)])]),s("div",vt,[yt,s("div",pt,[s("img",{src:"/storage/upload_files/payment_confirmation/"+t.transaction.payment_confirmation.file,style:{width:"300px"}},null,8,gt)])])])):n("",!0),t.transaction.payment_method=="manual_transfer"&&t.transaction.transaction_status=="pending"?(a(),e("div",kt,[s("div",wt,[Tt,xt,s("div",St,[(a(!0),e(u,null,v(t.banks,l=>(a(),e("div",Lt,[s("div",Pt,[s("div",Kt,[d(f,null,{default:i(()=>[s("img",{src:"/storage/upload_files/banks/"+l.image,style:{width:"125px","margin-top":"20px"}},null,8,Ht)]),_:2},1024)]),s("div",Mt,[d(f,null,{default:i(()=>[s("h5",Bt,r(l.bank_name),1),s("p",Ct,r(l.rekening_number),1),s("p",Dt,[s("b",null,r(l.rekening_name),1)])]),_:2},1024)])])]))),256))])])])):n("",!0)])])])])])])],64)}const Ft=K(H,[["render",Nt]]);export{Ft as default};
